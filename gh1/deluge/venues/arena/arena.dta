{arena load_section lighting lighting}
#define FLARES ((Flare7 Flare8 Flare9 Flare10 Flare11 Flare12))
#define FLARE_UP (0)
#define FLARE_DOWN (180)
#define OFF (
   (loop 99999 99999)
   (scale 1)
   (blend 0)
)
{func set_lights_bad
   {arena switch_anim
      orange_lights.envanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      pink_lights.envanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      red_lights.envanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light01.litanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light02.litanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lighta.litanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lightb.litanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      megalight.envanim
      (loop 10000 10001)
      (scale 1)
      (blend 480)
   }
   {arena switch_anim
      megalight1.envanim
      (loop 10000 10001)
      (scale 1)
      (blend 480)
   }
   {arena switch_anim solo.anim OFF}
   {arena set_singer_env singer0.env}
}
{func set_lights_okay_verse
   {arena switch_anim
      orange_lights.envanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      pink_lights.envanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      red_lights.envanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light01.litanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light02.litanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lighta.litanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lightb.litanim
      (loop 10000 13840)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim megalight.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim megalight1.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim solo.anim OFF}
   {arena set_singer_env singer0.env}
}
{func set_lights_okay_chorus
   {arena switch_anim
      orange_lights.envanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      pink_lights.envanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      red_lights.envanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light01.litanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light02.litanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lighta.litanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lightb.litanim
      (loop 30000 31920)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim megalight.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim megalight1.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim solo.anim OFF}
   {arena set_singer_env singer0.env}
}
{func set_lights_okay_solo
   {arena switch_anim
      char_light01.litanim
      (loop 50000 55000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      char_light02.litanim
      (loop 50000 55000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lighta.litanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim
      crowd_lightb.litanim
      (loop 20000 25000)
      (scale 1)
      (blend 60)
   }
   {arena switch_anim megalight.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim megalight1.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim orange_lights.envanim OFF}
   {arena switch_anim pink_lights.envanim OFF}
   {arena switch_anim red_lights.envanim OFF}
   {arena set_singer_env singer1.env}
   {switch {char_sys get_spot guitarist0}
      (0 {spotlight01.tnm set_frame 0})
      (1 {spotlight01.tnm set_frame 960})
      (2 {spotlight01.tnm set_frame 1920})
   }
   {arena switch_anim solo.anim (loop 50000 55000) (scale 1) (blend 60)}
}
{func set_lights_great_verse
   {arena switch_anim
      orange_lights.envanim
      (loop 0 3840)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim pink_lights.envanim (loop 0 3840) (scale 2) (blend 60)}
   {arena switch_anim red_lights.envanim (loop 0 3840) (scale 2) (blend 60)}
   {arena switch_anim char_light01.litanim (loop 0 3840) (scale 2) (blend 60)}
   {arena switch_anim char_light02.litanim (loop 0 3840) (scale 2) (blend 60)}
   {arena switch_anim crowd_lighta.litanim (loop 0 3840) (scale 2) (blend 60)}
   {arena switch_anim crowd_lightb.litanim (loop 0 3840) (scale 2) (blend 60)}
   {arena switch_anim megalight.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim megalight1.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim solo.anim OFF}
   {arena set_singer_env singer0.env}
}
{func set_lights_great_chorus
   {arena switch_anim
      orange_lights.envanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      pink_lights.envanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      red_lights.envanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      char_light01.litanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      char_light02.litanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      crowd_lighta.litanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      crowd_lightb.litanim
      (loop 40000 41920)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim megalight.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim megalight1.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim solo.anim OFF}
   {arena set_singer_env singer0.env}
}
{func set_lights_great_solo
   {arena switch_anim
      char_light01.litanim
      (loop 50000 55000)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      char_light02.litanim
      (loop 50000 55000)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      crowd_lighta.litanim
      (loop 20000 25000)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim
      crowd_lightb.litanim
      (loop 20000 25000)
      (scale 2)
      (blend 60)
   }
   {arena switch_anim megalight.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim megalight1.envanim (loop 0 3840) (scale 1) (blend 480)}
   {arena switch_anim orange_lights.envanim OFF}
   {arena switch_anim pink_lights.envanim OFF}
   {arena switch_anim red_lights.envanim OFF}
   {arena set_singer_env singer1.env}
   {switch {char_sys get_spot guitarist0}
      (0 {spotlight01.tnm set_frame 0})
      (1 {spotlight01.tnm set_frame 960})
      (2 {spotlight01.tnm set_frame 1920})
   }
   {arena switch_anim solo.anim (loop 20000 23840) (scale 1) (blend 60)}
}
{func anim_bad
   {fx_rays.view set_showing FALSE}
   {fx_rays1.view set_showing TRUE}
   {arena switch_anim animated_crud.view (loop 3200 3200) (blend 960)}
   {arena switch_anim animated_crud1.view (loop 3200 3200) (blend 960)}
}
{func anim_okay
   {fx_rays.view set_showing TRUE}
   {fx_rays1.view set_showing FALSE}
   {arena switch_anim animated_crud.view (loop 0 3200) (blend 960)}
   {arena switch_anim animated_crud1.view (loop 3200 3200) (blend 960)}
}
{func anim_great
   {fx_rays.view set_showing TRUE}
   {fx_rays1.view set_showing TRUE}
   {arena switch_anim animated_crud.view (loop 0 3200) (blend 960)}
   {arena switch_anim animated_crud1.view (loop 0 3200) (blend 960)}
}
{func hit_speakers
   ($speakers)
   {foreach $anim $speakers
      {arena switch_anim
         $anim
         (range {random_int 110 130} 0)
         (scale 1)
         (blend 0)
      }
   }
}
{func hit_guitar_amp
   ($slot)
   {hit_speakers (stack_speakers.tnm stack_speakers02.tnm)}
}
{arena add_handlers
   (kick_drum
      {game anim_task kickdrum1.tnm 200 0 180}
      {game anim_task kickdrum2.tnm 200 0 180}
   )
   (bass_hit {hit_speakers (stack_speakers05.tnm stack_speakers06.tnm)})
   (hit_gem {hit_guitar_amp $slot})
   (finish_loading
      {"6 foot camera.cam" add_trans char_light03a.lit}
      {"6 foot camera.cam" add_trans color_plane.mesh}
      {animated_crud.view unhook_anim_parents}
      {animated_crud1.view unhook_anim_parents}
      {stack_speakers.tnm unhook_anim_parents}
      {stack_speakers02.tnm unhook_anim_parents}
      {stack_speakers05.tnm unhook_anim_parents}
      {stack_speakers06.tnm unhook_anim_parents}
      {solo.anim unhook_anim_parents}
      {kickdrum1.tnm unhook_anim_parents}
      {kickdrum2.tnm unhook_anim_parents}
   )
   (intro_start
      {anim_okay}
      {flare_obstruct.view set_showing TRUE}
      {crowd_lightc.litanim set_frame 0}
      {arena switch_anim_rt
         flames.matanim
         (range 10 10)
         (scale 1.2e-2)
         (blend 0)
      }
      {arena switch_anim_rt
         fire_glow.matanim
         (range 10 10)
         (scale 1.2e-2)
         (blend 0)
      }
      {arena switch_anim_rt fire1.partanim (range 480 480) (scale 1) (blend 0)}
      {arena switch_anim_rt fire2.partanim (range 480 480) (scale 1) (blend 0)}
      {arena switch_anim_rt fire3.partanim (range 480 480) (scale 1) (blend 0)}
      {arena switch_anim_rt fire4.partanim (range 480 480) (scale 1) (blend 0)}
   )
   (music_start)
   (venue_switch_cam
      {'arena::stadium_spotlight.mesh' set_showing
         {&&
            {!= {arena cam_msg} "flr_far_rt03"}
            {!= {arena cam_msg} "flr_far_lft03"}
         }
      }
      {'arena::big_stack.view' set_showing {!= {arena cam_msg} "win01"}}
      {'arena::big_stack02.view' set_showing {!= {arena cam_msg} "win01"}}
      {'arena::big_stack05.view' set_showing {!= {arena cam_msg} "win01"}}
      {'arena::big_stack06.view' set_showing {!= {arena cam_msg} "win01"}}
   )
   (terminate
      {delete set_lights_bad}
      {delete set_lights_okay_verse}
      {delete set_lights_okay_chorus}
      {delete set_lights_okay_solo}
      {delete set_lights_great_verse}
      {delete set_lights_great_chorus}
      {delete set_lights_great_solo}
      {delete anim_bad}
      {delete anim_okay}
      {delete anim_great}
      {delete hit_guitar_amp}
      {delete hit_speakers}
   )
   (excitement_bad {anim_bad})
   (excitement_okay {anim_okay})
   (excitement_great {anim_great})
   (set_lights_bad {set_lights_bad})
   (set_lights_okay_verse {set_lights_okay_verse})
   (set_lights_okay_chorus {set_lights_okay_chorus})
   (set_lights_okay_solo {set_lights_okay_solo})
   (set_lights_great_verse {set_lights_great_verse})
   (set_lights_great_chorus {set_lights_great_chorus})
   (set_lights_great_solo {set_lights_great_solo})
   (chorus
      {if {> $arena.excitement kExcitementBad}
         {foreach $flare FLARES
            {$flare set_steps FLARE_UP}
         }
         {flare_obstruct.view set_showing FALSE}
         {arena switch_anim
            crowd_lightc.litanim
            (range 50 100)
            (scale 1)
            (blend 120)
         }
         {arena delay_task
            1920
            {foreach $flare FLARES
               {$flare set_steps FLARE_DOWN}
            }
            {flare_obstruct.view set_showing TRUE}
         }
         {arena delay_task
            1920
            {arena switch_anim crowd_lightc.litanim (range 0 49) (scale 1) (blend 240)}
         }
         {arena switch_anim_rt flames.matanim (range 1 10) (scale 1.2e-2) (blend 0)}
         {arena switch_anim_rt
            fire_glow.matanim
            (range 1 10)
            (scale 1.2e-2)
            (blend 0)
         }
         {arena switch_anim_rt fire1.partanim (range 0 480) (scale 1) (blend 0)}
         {arena switch_anim_rt fire2.partanim (range 0 480) (scale 1) (blend 0)}
         {arena switch_anim_rt fire3.partanim (range 0 480) (scale 1) (blend 0)}
         {arena switch_anim_rt fire4.partanim (range 0 480) (scale 1) (blend 0)}
      }
   )
   (game_won {anim_great})
   (game_lost {anim_bad})
}